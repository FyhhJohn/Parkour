{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\core/assets\\script\\core\\Http.js"],"names":["cc","Class","name","send","route","data","cbSuccess","cbFail","xhr","XMLHttpRequest","open","HTTP_SERVERS","SERVER","setRequestHeader","GameApp","user","_id","onload","res","JSON","parse","responseText","log","status","ontimeout","onerror","onabort","stringify","httpPost","service","method","timeout","Number","returnCode","resultData"],"mappings":"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","file":"Http.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\core","sourcesContent":["cc.Class({\r\n    name: 'Http',\r\n\r\n    send: function (route, data, cbSuccess, cbFail) {\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.open('post', HTTP_SERVERS[SERVER] + route);\r\n        xhr.setRequestHeader('Content-Type', 'application/json');\r\n        xhr.setRequestHeader('uid', GameApp.data.user._id);\r\n        xhr.onload = function () {\r\n            let res = JSON.parse(xhr.responseText);\r\n            cc.log(res);\r\n            if (xhr.status === 200) {\r\n                return cbSuccess && cbSuccess(res);\r\n            }\r\n            cbFail && cbFail(res);\r\n        };\r\n        xhr.ontimeout = function () {\r\n            cc.log('网络连接超时');\r\n        };\r\n        xhr.onerror = function () {\r\n            cc.log('网络连接出错');\r\n        };\r\n        xhr.onabort = function () {\r\n            cc.log('网络连接中断');\r\n        };\r\n        xhr.send(JSON.stringify(data));\r\n    },\r\n    httpPost: function (service, method, data, cbSuccess, cbFail) {\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.timeout = 15000;\r\n        xhr.open('post', HTTP_SERVERS[SERVER]);\r\n        xhr.setRequestHeader('Content-Type', 'application/json;charset=utf-8');\r\n\r\n        xhr.setRequestHeader('app_version', '1');\r\n        xhr.setRequestHeader('appversion', '1');\r\n        xhr.setRequestHeader('channel_code', '1000010');\r\n        xhr.setRequestHeader('channelcode', '1000010');\r\n        xhr.setRequestHeader('subchannelid', '1');\r\n        xhr.setRequestHeader('platform', '3');\r\n        xhr.setRequestHeader('tel', '');\r\n        xhr.setRequestHeader('userid', '');\r\n\r\n        xhr.setRequestHeader('imei', '123');\r\n        xhr.setRequestHeader('imsi', '111');\r\n        xhr.setRequestHeader('client_ip', '0');\r\n        xhr.setRequestHeader('clientip', '0');\r\n        xhr.setRequestHeader('brand', '2');\r\n        xhr.setRequestHeader('model', '2');\r\n        xhr.setRequestHeader('screen', '1280');\r\n        xhr.setRequestHeader('memory', '1024');\r\n        xhr.setRequestHeader('os_version', '0');\r\n        xhr.setRequestHeader('osversion', '0');\r\n\r\n        xhr.setRequestHeader('spid', '127');\r\n        xhr.setRequestHeader('migu_channel', '1');\r\n        xhr.setRequestHeader('migubase_ch', '1');\r\n        xhr.setRequestHeader('type_id', '1');\r\n        xhr.setRequestHeader('game_id', '2');\r\n        xhr.setRequestHeader('miguchannel', '1');\r\n        xhr.setRequestHeader('migubasech', '1');\r\n        xhr.setRequestHeader('typeid', '1');\r\n        xhr.setRequestHeader('gameid', '2');\r\n\r\n        xhr.onload = function () {\r\n            let res = JSON.parse(xhr.responseText);\r\n            cc.log(res);\r\n            if (Number(res.returnCode) !== 0) {\r\n                if (cbFail) {\r\n                    cbFail(res.returnCode, res.resultData);\r\n                }\r\n                return;\r\n            }\r\n            if (cbSuccess) {\r\n                cbSuccess(res.resultData);\r\n            }\r\n        };\r\n        xhr.ontimeout = function () {\r\n            cc.log('网络连接超时');\r\n        };\r\n        xhr.onerror = function () {\r\n            cc.log('网络连接出错');\r\n        };\r\n        xhr.onabort = function () {\r\n            cc.log('网络连接中断');\r\n        };\r\n        xhr.send(JSON.stringify({\r\n            service: service,\r\n            method: method,\r\n            data: data\r\n        }));\r\n    },\r\n});\r\n"]}